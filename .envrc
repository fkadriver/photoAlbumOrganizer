# Use flake for development environment
use flake

# Only reload when these files change
watch_file flake.nix
watch_file flake.lock
watch_file requirements.txt

# Prompt to run photo organizer on directory entry
_photo_organizer_prompt() {
  echo ""
  echo "=========================================="
  echo "  Photo Album Organizer"
  echo "=========================================="
  if [ -f .photo_organizer_settings.json ]; then
    echo "  Saved settings found."
    echo ""
    echo "  [r] Run with saved settings"
    echo "  [i] Interactive setup"
    echo "  [s] Drop to shell"
    echo "=========================================="
    printf "  Your choice [s]: "
    read -r choice
    case "$choice" in
      r|R)
        echo "  Running with saved settings..."
        python photo_organizer.py -i
        ;;
      i|I)
        python photo_organizer.py -i
        ;;
      *)
        echo "  Dropping to shell. Run 'python photo_organizer.py -i' to start."
        ;;
    esac
  else
    echo ""
    echo "  [i] Interactive setup"
    echo "  [s] Drop to shell"
    echo "=========================================="
    printf "  Your choice [s]: "
    read -r choice
    case "$choice" in
      i|I)
        python photo_organizer.py -i
        ;;
      *)
        echo "  Dropping to shell. Run 'python photo_organizer.py -i' to start."
        ;;
    esac
  fi
}
_photo_organizer_prompt
